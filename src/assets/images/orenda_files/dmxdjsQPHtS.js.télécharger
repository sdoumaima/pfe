;/*FB_PKG_DELIM*/

__d("MWChatForwardDialogQuery.graphql",["MWChatForwardDialogQuery_facebookRelayOperation","relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"scale"},{defaultValue:null,kind:"LocalArgument",name:"suppress_xac_groups"}],c={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},d=[c],e={kind:"Variable",name:"suppress_xac_groups",variableName:"suppress_xac_groups"},f=[{kind:"Literal",name:"first",value:5},e],g={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},i=[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],j={alias:null,args:[{kind:"Literal",name:"height",value:60},{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Literal",name:"width",value:60}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:i,storageKey:null},k=[{alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null},{alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"messaging_actor",plural:!1,selections:[g,h,c,j],storageKey:null},c],storageKey:null}],l={alias:null,args:null,concreteType:"MessageThreadKey",kind:"LinkedField",name:"thread_key",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"other_user_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"thread_fbid",storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MWChatForwardDialogQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometMessengerResharesTargets_viewer"},{args:null,kind:"FragmentSpread",name:"CometMessengerSecureResharesTargets_viewer"},{args:null,kind:"FragmentSpread",name:"CometMessengerAIOResharesTargets_viewer"},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:d,storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MWChatForwardDialogQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:[{kind:"Literal",name:"broadcast_list_type",value:"WEB"},e],concreteType:"SuggestedRecipientsConnection",kind:"LinkedField",name:"messenger_suggested_recipients",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerBroadcastSection",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"section_type",storageKey:null},{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"title",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],storageKey:null},{alias:null,args:f,concreteType:"SuggestedRecipientsAttachmentsConnection",kind:"LinkedField",name:"attachments_pageable",plural:!1,selections:[{alias:null,args:null,concreteType:"SuggestedRecipientsAttachmentsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[g,c,{kind:"TypeDiscriminator",abstractKey:"__isMessengerSearchable"},{kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Literal",name:"first",value:3}],concreteType:"MessagingParticipantsOfThreadConnection",kind:"LinkedField",name:"other_participants",plural:!1,selections:k,storageKey:"other_participants(first:3)"},{alias:null,args:null,kind:"ScalarField",name:"is_cm_thread",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"thread_name",storageKey:null},{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:i,storageKey:null},{alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"associated_group",plural:!1,selections:[h,c],storageKey:null},l],type:"MessengerViewerGroupThread",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Literal",name:"first",value:1}],concreteType:"MessagingParticipantsOfThreadConnection",kind:"LinkedField",name:"other_participants",plural:!1,selections:k,storageKey:"other_participants(first:1)"},l],type:"MessengerViewer1To1Thread",abstractKey:null},{kind:"InlineFragment",selections:[h,j],type:"User",abstractKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"page_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"end_cursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_next_page",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:f,filters:["suppress_xac_groups"],handle:"connection",key:"CometMessengerReshareDialogSuggestionsSection_section_attachments_pageable",kind:"LinkedHandle",name:"attachments_pageable"},c,{alias:null,args:null,kind:"ScalarField",name:"__token",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_create_group",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"account_user",plural:!1,selections:d,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_limited_account",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[g,c],storageKey:null}],storageKey:null}]},params:{id:b("MWChatForwardDialogQuery_facebookRelayOperation"),metadata:{},name:"MWChatForwardDialogQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("useMWTeardownOnMessageDelete",["MWChatDeleteMessageEventEmitter","MWChatMessageId","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useEffect;function a(a){var b=a.messageID,c=a.onClose;return h(function(){var a=d("MWChatDeleteMessageEventEmitter").subscribe(function(a){var e=d("MWChatMessageId").getMessageId(b);e===a&&c()});return function(){a()}},[b,c])}g["default"]=a}),98);
__d("MWChatForwardDialog.react",["fbt","Actor","CometDialog.react","CometDialogHeader.react","CometMessengerResharesTargets.react","CometRelay","MWChatForwardDialogQuery.graphql","MWChatThreadId","asyncToGeneratorRuntime","cometPushToast","cr:11366","cr:1277","react","recoverableViolation","unrecoverableViolation","useMWTeardownOnMessageDelete","useResharesDialogState"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=d("react");e=d("react");var k=e.useCallback,l=e.useMemo;function m(a){return a.targetID}function n(a){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.onSendMessage;a=a.target;b(d("MWChatThreadId").fromJs(a))});return o.apply(this,arguments)}function a(a){var e,f=a.props;a=a.queries;var g=f.dropToggle,o=f.forwardDialogType,p=l(function(){if(o==="open_")return c("CometMessengerResharesTargets.react");else if(o==="secure"&&b("cr:11366"))return b("cr:11366");else if(o==="cross_transport"&&b("cr:1277"))return b("cr:1277");else{c("recoverableViolation")("Secure forward not allowed","messenger_web_product");return c("CometMessengerResharesTargets.react")}},[o]);a=d("CometRelay").usePreloadedQuery(i!==void 0?i:i=b("MWChatForwardDialogQuery.graphql"),a.forwardQueryReference);a=a==null?void 0:a.viewer;e=a==null?void 0:(e=a.actor)==null?void 0:e.id;var q=d("Actor").useActor();q=q[0];if(a==null||e==null||q==null)throw c("unrecoverableViolation")("Need a viewer id, actor in order to forward a message","messenger_web_product");if(q!==e)throw c("unrecoverableViolation")("Forward in Messenger currently only supports forwarding as the account user","messenger_web_product");c("useMWTeardownOnMessageDelete")({messageID:f.messageID,onClose:f.onClose});q=k(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield n({onSendMessage:f.onSend,target:a})});return function(b){return a.apply(this,arguments)}}(),[f.onSend]);e=k(function(){d("cometPushToast").cometPushErrorToast({message:h._("__JHASH__-tYE2PmgwwZ__JHASH__")})},[]);e=c("useResharesDialogState")({getTargetKey:m,handleError:e,sharePost:q,showForwardLimit:!0});q=e.getTargetAction;var r=l(function(){return j.jsx(c("CometDialogHeader.react"),{onClose:f.onClose,text:h._("__JHASH__iux_v9_IGpS__JHASH__")})},[f.onClose]);return j.jsx(c("CometDialog.react"),{footer:null,header:r,onClose:f.onClose,size:"small",children:j.jsx(p,{canForward:e.canForward,dropSecureThreadToggle:g,getTargetAction:q,viewer:a,withTopDivider:!1})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);