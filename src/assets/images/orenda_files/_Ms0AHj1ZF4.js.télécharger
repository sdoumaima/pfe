;/*FB_PKG_DELIM*/

__d("MWChatSearchTypeaheadLightspeedDataSource",["FBLogger","LSIntEnum","LSSearchType","MAWGating","MNetRankType","MWChatSearchIssueLightspeedQuery.bs","MWChatSearchResultType","MWChatSearchThreadCutover","MWLSSearchIssueSearchQuerySupportedTypes.bs","Promise","asyncToGeneratorRuntime","cr:1489","cr:6430","createMWChatSearchTypeaheadDataEntry","gkx","mwChatSearchPayloadDecoratorRemoveDuplicates","mwChatSearchPayloadDecoratorRemoveExcluded","mwChatSearchPayloadEnumerate","qex"],(function(a,b,c,d,e,f,g){"use strict";var h=d("MAWGating").isArmadillo()&&d("MAWGating").isTlcSearchEnabled();a=c("gkx")("4164");var i=a&&((e=c("qex")._("73"))!=null?e:!1),j=(f=c("qex")._("962"))!=null?f:a?10:0,k=a?10:0,l=[d("LSIntEnum").ofNumber(c("LSSearchType").CONTACT)];function m(a,d,e,f){if(b("cr:6430")==null)return b("Promise").resolve([]);return d.length>0&&!d.includes("secure")?b("Promise").resolve([]):b("cr:6430").fetchResults(a,e,!0,f).then(function(a){a=a.map(c("createMWChatSearchTypeaheadDataEntry"));return k<=0?a:a.slice(0,k)})["catch"](function(a){c("FBLogger")("messenger_search").catching(a).mustfix("Error performing MWChatSearchIssueMAWFTSQuery.fetchResults");return[]})}function n(a,e,f){if(!i&&e===d("MWChatSearchIssueLightspeedQuery.bs").Surfaces.broadcast)return b("Promise").resolve([]);if(b("cr:1489")==null)return b("Promise").resolve([]);return a.length>0&&!a.includes("offline")?b("Promise").resolve([]):b("cr:1489").search(f.query,!0).then(function(a){a=a.map(c("createMWChatSearchTypeaheadDataEntry"));return j<=0?a:a.slice(0,j)})}function o(a,c,d,e){a=m(a,c,d,e);c=n(c,d,e);return b("Promise").all([a,c])}function p(a,b){return h?a.filter(function(a){var e;a=a.rawData;if(a.resultType!==c("MWChatSearchResultType").USER&&a.resultType!==c("MWChatSearchResultType").GROUP)return!0;var f=a.otherUserId!==void 0;e=(e=a.otherUserId)!=null?e:a.id.toString();if(b==null)return!0;else e=d("MWChatSearchThreadCutover").getCutoverThreadKey(b,e);var g=e!==void 0;if(f){if(!g)return!0;return g&&a.id.toString()===e?!0:!1}else return!g}):a}e=function(){function a(a){var b=a.excludedIDs;b=b===void 0?[]:b;var e=a.lightspeedSupportedTypes;e=e===void 0?d("MWLSSearchIssueSearchQuerySupportedTypes.bs").allSupportedTypes:e;var f=a.source;f=f===void 0?d("MWChatSearchIssueLightspeedQuery.bs").Surfaces.universal:f;var g=a.includeGroupSearch;g=g===void 0?!1:g;var h=a.excludeNonSecureThreadSearch;h=h===void 0?!1:h;var i=a.nullStateRankType;i=i===void 0?d("LSIntEnum").ofNumber(c("MNetRankType").MESSENGER_USER_SEARCH_NULLSTATE):i;var j=a.subDataSources;j=j===void 0?[]:j;a=a.database;this.$1=[];this.$2=[];this.$2=b;this.$3=e;this.$4=f;this.$5=g;this.$6=h;this.$7=i;this.$8=j;this.$9=a;this.$10=e.includes(d("LSIntEnum").ofNumber(c("LSSearchType").INTEGRATED_MESSAGE_SEARCH_THREAD))}var e=a.prototype;e.fetchNetwork=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=this,f=c("mwChatSearchPayloadDecoratorRemoveDuplicates")(this.$1),g=c("mwChatSearchPayloadDecoratorRemoveExcluded")(this.$2);if(a.query.length===0)return d("MWChatSearchIssueLightspeedQuery.bs").fetchRecommendations(this.$3,this.$4,a,this.$7).then(function(d){d=d.map(c("createMWChatSearchTypeaheadDataEntry"));return b("Promise").resolve({entries:d,params:a})});var h=[];this.$10&&!this.$6&&h.push({key:a.query,label:'Search messages for "'+a.query+'"',rawData:{displayName:'Search messages for "'+a.query+'"',id:a.query,imageUrl:"",isContact:!1,isE2e:!1,isEPD:!1,resultType:"messages",secondaryImageUrl:"",subtext:""},type:"entry"});var i=(yield o(this.$3,this.$8,this.$4,a)),j=i[0],k=i[1];i=this.$6?l:this.$3;return d("MWChatSearchIssueLightspeedQuery.bs").fetchResults(i,this.$8,this.$4,this.$5,a).then(function(b){b=b.map(c("createMWChatSearchTypeaheadDataEntry"));b=h.concat(k,j,b);b=e.$6?b.filter(function(a){a.key;a=a.rawData;return a.isE2e}):b;b=p(b,e.$9);return c("mwChatSearchPayloadEnumerate")(g(f({entries:b,params:a})))})});function e(b){return a.apply(this,arguments)}return e}();return a}();g["default"]=e}),98);
__d("useMWLightSpeedChatSearchSuggestedContacts",["MWChatSearchFetchContactRecommendations","createMWChatSearchTypeaheadDataEntry","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useMemo,i=void 0;function a(){var a=d("MWChatSearchFetchContactRecommendations").useChatSearchContactRecommendations(i);return h(function(){return a.map(function(a,b){a=a[0];return c("createMWChatSearchTypeaheadDataEntry")(a,b)})},[a])}g["default"]=a}),98);
__d("MWJewelSearchTypeahead.react",["fbt","BaseTypeahead.react","CometRelay","CometTypeaheadBackButton.react","CometTypeaheadInputRoundedStrategy.react","CometTypeaheadLayoutContextualStrategy.react","LsUniversalSearchEndFalcoEvent","LsUniversalSearchQueryChangedFalcoEvent","LsUniversalSearchStartFalcoEvent","MAWGating","MWChatSearchIssueLightspeedQuery.bs","MWChatSearchTypeaheadLightspeedDataSource","MWLSSearchIssueSearchQuerySupportedTypes.bs","MWLSThreadDisplayContext","MWPSearchSystem.bs","MWSearchLogging","clearTimeout","createMWJewelSearchTypeaheadViewStrategy.react","gkx","react","setTimeout","useMWLightSpeedChatSearchSuggestedContacts","useReStore","uuid"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");b=d("react");var j=b.useCallback,k=b.useMemo,l=b.useRef,m=b.useState,n={searchInput:{marginTop:"x1xmf6yo",marginEnd:"x11i5rnm",marginBottom:"x1e56ztr",marginStart:"x1mh8g0r",paddingTop:"xexx8yu",paddingEnd:"x1pi30zi",paddingBottom:"x18d9i69",paddingStart:"x1swvt13",$$css:!0},searchView:{borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",boxShadow:"x1gnnqk1",display:"x78zum5",minHeight:"x1vvvjs8",$$css:!0}},o=c("createMWJewelSearchTypeaheadViewStrategy.react")(),p=["1001"],q=c("gkx")("6395");function a(a){var b=a.onBlur,e=a.onChange,f=a.onFocus,g=a.onPressEntry,r=a.onSelectFreeformQuery,s=babelHelpers.objectWithoutPropertiesLoose(a,["onBlur","onChange","onFocus","onPressEntry","onSelectFreeformQuery"]);a=m(null);var t=a[0],u=a[1],v=d("CometRelay").useRelayEnvironment(),w=l(null),x=c("useReStore")(),y=l(!1),z=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();a=k(function(){return new(c("MWChatSearchTypeaheadLightspeedDataSource"))({excludedIDs:[],includeGroupSearch:z!=="ChatTab"&&c("gkx")("1902857"),includeRecommendations:!0,lightspeedSupportedTypes:d("MWLSSearchIssueSearchQuerySupportedTypes.bs").allSupportedTypesWithMessageSearch,limit:20,relayEnvironment:v,source:d("MWChatSearchIssueLightspeedQuery.bs").Surfaces.universal})},[v,z]);var A=j(function(){u(null),t!=null&&(c("LsUniversalSearchEndFalcoEvent").log(function(){return{end_action:0,instance_id:t,recipient_ids:p}}),y.current||w.current!=null&&(c("clearTimeout")(w.current),w.current=null)),e("")},[e,t]),B=j(function(a){var b=function(){w.current!=null&&(c("clearTimeout")(w.current),w.current=null),g!=null&&g(a)};if(t==null){b();return}d("MWSearchLogging").logResultSelected(t,s.queryString,a,p,y);b()},[g,t,s.queryString]),C=j(function(){q&&d("MWPSearchSystem.bs").clearAll(x);var a=c("uuid")();u(a);y.current=!1;c("LsUniversalSearchStartFalcoEvent").log(function(){return{instance_id:a}});w.current=c("setTimeout")(function(){c("LsUniversalSearchEndFalcoEvent").log(function(){return{end_action:3,instance_id:a,recipient_ids:p}})},3e4)},[x]),D=j(function(a){t!=null&&c("LsUniversalSearchQueryChangedFalcoEvent").log(function(){return{instance_id:t,query_string:a}}),e(a)},[e,t]),E=c("useMWLightSpeedChatSearchSuggestedContacts")();return i.jsx(c("BaseTypeahead.react"),{dataSource:a,dataSourceFetchConfigParams:d("MAWGating").isArmadillo()?{requestFlow:"network-upon-approve"}:{},emptyEntries_DO_NOT_USE:E,inputExtraProps:{hideIconAnimation:!0,hideIconOnFocus:!0},inputStartContent:t?i.jsx(c("CometTypeaheadBackButton.react"),{testid:void 0}):null,inputStrategyRenderer:c("CometTypeaheadInputRoundedStrategy.react"),layoutStrategyRenderer:c("CometTypeaheadLayoutContextualStrategy.react"),loggingContext:"messenger_jewel",onBlur:b,onChange:D,onClose:A,onFocus:f,onOpen:C,onPressEntry:B,onSelectFreeformQuery:r,placeholder:h._("__JHASH__ktsKn3dbNLm__JHASH__"),queryString:s.queryString,shouldQueryStringUpdateFromSelectedEntryOnClick:!1,viewStrategyRenderer:o,xstyles:{inputXStyle:n.searchInput,viewXStyle_DO_NOT_USE:n.searchView}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometReshareDialogTargetSection.react",["CometUnit.react","CometUnitHeader.react","TetraList.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.children,d=a.sectionTitle,e=a.subtitle;a=a.testid;a=a===void 0?"":a;return h.jsx(c("CometUnit.react"),{header:h.jsx(c("CometUnitHeader.react"),{body:e,headline:d,level:3}),testid:void 0,children:h.jsx(c("TetraList.react"),{children:b})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometResharesConstants",[],(function(a,b,c,d,e,f){"use strict";a=3e3;f.UNDO_DELAY_MS=a}),66);
__d("CometResharesSearchInputStrategy.react",["CometTypeaheadInputRoundedStrategy.react","MWPSearchSystem.bs","emptyFunction","gkx","qex","react","useCometPreloader","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useCallback;function a(a,b){var e=c("useReStore")(),f=i(function(){var a=c("gkx")("4164");a=a&&((a=c("qex")._("73"))!=null?a:!1);a&&d("MWPSearchSystem.bs").makeAll(e)},[e]);f=c("useCometPreloader")("button_aggressive",c("emptyFunction"),f);var g=f[0];f=f[1];return h.jsx("div",{onMouseEnter:g,onMouseLeave:f,children:h.jsx(c("CometTypeaheadInputRoundedStrategy.react"),babelHelpers["extends"]({},a,{ref:b}))})}a.displayName=a.name+" [from "+f.id+"]";b=h.forwardRef(a);g["default"]=b}),98);
__d("MwbBreadthForwardingLimitReachedBannerShownFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("801");b=d("FalcoLoggerInternal").create("mwb_breadth_forwarding_limit_reached_banner_shown",a);e=b;g["default"]=e}),98);
__d("CometResharesSearchTargetsArea.react",["fbt","BaseTypeahead.react","CometResharesSearchInputStrategy.react","CometScrollableArea.react","CometTypeaheadLayoutInlineStrategy.react","CometTypeaheadProgressGlimmer.react","CometTypeaheadViewEmptyState.react","MWPSearchSystem.bs","MwbBreadthForwardingLimitReachedBannerShownFalcoEvent","TetraText.react","gkx","qex","react","stylex","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");b=d("react");var j=b.useCallback,k=b.useMemo,l=b.useState,m=5,n={input:{marginBottom:"xod5an3",marginEnd:"xktsk01",marginStart:"x1d52u69",marginTop:"x14vqqas",$$css:!0},view:{borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",height:"x16nrsnc",$$css:!0},withTopDivider:{borderTop:"x1n2xptk",marginTop:"xw7yly9",$$css:!0}};function a(a){var b=a.canForward,e=a.dataSource;a.dropSecureThreadToggle;var f=a.initialQueryString;f=f===void 0?"":f;var g=a.noSearchResultsText,o=a.placeholder,p=a.renderResults,q=a.suggestedTargets;a=a.withTopDivider;a=a===void 0?!0:a;f=l((f=f)!=null?f:"");var r=f[0];f=f[1];var s=l(!1),t=s[0];s=s[1];var u=c("useReStore")(),v=j(function(){var a=c("gkx")("4164");a=a&&((a=c("qex")._("73"))!=null?a:!1);a===!0&&d("MWPSearchSystem.bs").makeAll(u)},[u]),w=k(function(){return function(a){var b=a.entries,d=a.isLoading;a=a.queryString;a=((a=a==null?void 0:a.length)!=null?a:0)>0;if(!a)return i.jsx(c("CometScrollableArea.react"),{horizontal:!1,xstyle:n.view,children:q});return b.length===0?i.jsx(c("CometTypeaheadViewEmptyState.react"),{children:g}):i.jsxs(c("CometScrollableArea.react"),{horizontal:!1,xstyle:n.view,children:[d&&i.jsx(c("CometTypeaheadProgressGlimmer.react"),{}),p({entries:b})]})}},[q,p,g]);if(!b){t||(c("MwbBreadthForwardingLimitReachedBannerShownFalcoEvent").log(function(){return{limit:m.toString()}}),s(!0));return i.jsxs("div",{className:c("stylex")(a&&n.withTopDivider),"data-testid":void 0,children:[i.jsx("div",{className:"x5hsz1j x10e4vud x1v7wizp x190cc1c xq82lqc xlhe6ec x1lq5wgf xgqcy7u x30kzoy x9jhf4c x10w6t97 x1d52u69 x1xmf6yo x1swvt13 xyamay9 x10l6tqk xloyg6u x1vjfegm","data-testid":void 0,children:i.jsxs(c("TetraText.react"),{color:"primary",type:"headline3",children:[h._("__JHASH__ziMwr5yUHFi__JHASH__")," "]})}),i.jsx(c("BaseTypeahead.react"),{dataSource:e,inputStrategyRenderer:c("CometResharesSearchInputStrategy.react"),layoutStrategyRenderer:c("CometTypeaheadLayoutInlineStrategy.react"),onChange:f,onFocus:v,placeholder:o,queryString:r,shouldQueryStringFollowHighlightedEntry:!1,shouldQueryStringUpdateFromSelectedEntryOnClick:!1,viewStrategyRenderer:w,xstyles:{inputXStyle:n.input,viewXStyle_DO_NOT_USE:n.view}})]})}return i.jsx("div",{className:c("stylex")(a&&n.withTopDivider),"data-testid":void 0,children:i.jsx(c("BaseTypeahead.react"),{dataSource:e,inputStrategyRenderer:c("CometResharesSearchInputStrategy.react"),layoutStrategyRenderer:c("CometTypeaheadLayoutInlineStrategy.react"),onChange:f,onFocus:v,placeholder:o,queryString:r,shouldQueryStringFollowHighlightedEntry:!1,shouldQueryStringUpdateFromSelectedEntryOnClick:!1,testid:void 0,viewStrategyRenderer:w,xstyles:{inputXStyle:n.input,viewXStyle_DO_NOT_USE:n.view}})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MercuryParticipantListRenderer",["fbt","MercuryIDs","react"],(function(a,b,c,d,e,f,g,h){"use strict";d("react");a=function(){function a(){var a=this;this.$6=function(b){var c=a.$5;if(c!=null){var e=d("MercuryIDs").getUserIDFromParticipantID(b.id);if(e!=null&&c[e]!=null&&c[e]!=null)return c[e]}return a.$2?b.short_name:b.name};this.$1=!1;this.$2=!1;this.$3=!1;this.$4=0;this.$5=null}var b=a.prototype;b.renderParticipantList=function(a){a=a.map(this.$6);switch(a.length){case 0:return i(this.$1);case 1:return j(a);case 2:return this.$3?l(a):k(a);case 3:return this.$3?n(a):m(a);default:return this.$3?p(a,this.$4):o(a,this.$4)}};b.setIsNewThread=function(a){this.$1=a;return this};b.setNameRenderer=function(a){this.$6=a;return this};b.setUseShortName=function(a){this.$2=a;return this};b.setNickname=function(a){this.$5=a;return this};b.setUseAndSeparator=function(a){this.$3=a;return this};b.setTotalParticipantCount=function(a){this.$4=a;return this};return a}();function i(a){if(a)return h._("__JHASH__x8VmROFXCKu__JHASH__");else return h._("__JHASH__TWJSQ7ipyAa__JHASH__")}function j(a){return a[0]}j.displayName=j.name+" [from "+f.id+"]";function k(a){return h._("__JHASH__QVqNH0CDXLb__JHASH__",[h._param("participant1",a[0]),h._param("participant2",a[1])])}k.displayName=k.name+" [from "+f.id+"]";function l(a){return h._("__JHASH__JTikoCjxB3O__JHASH__",[h._param("participant1",a[0]),h._param("participant2",a[1])])}l.displayName=l.name+" [from "+f.id+"]";function m(a){return h._("__JHASH__FfZsrZ3E8l3__JHASH__",[h._param("participant1",a[0]),h._param("participant2",a[1]),h._param("participant3",a[2])])}m.displayName=m.name+" [from "+f.id+"]";function n(a){return h._("__JHASH__0a7wtHuBFBj__JHASH__",[h._param("participant1",a[0]),h._param("participant2",a[1]),h._param("participant3",a[2])])}n.displayName=n.name+" [from "+f.id+"]";function o(a,b){return h._("__JHASH__DTZWN4rVq-W__JHASH__",[h._param("participant1",a[0]),h._param("participant2",a[1]),h._param("participant3",a[2]),h._param("others_link",q((b||a.length)-3))])}o.displayName=o.name+" [from "+f.id+"]";function p(a,b){return h._("__JHASH__P_doxz4r-mz__JHASH__",[h._param("participant1",a[0]),h._param("participant2",a[1]),h._param("others_link",q((b||a.length)-2))])}p.displayName=p.name+" [from "+f.id+"]";function q(a){if(a>1)return h._("__JHASH__fXVmG3gSqH2__JHASH__",[h._param("others_count",a,[0])]);else return h._("__JHASH__AXvVFDKadXa__JHASH__")}g["default"]=a}),98);